{% extends 'front.html.twig' %}

{% block body %}

    <!-- Topbar Start -->
    <div class="container-fluid bg-dark py-3 px-lg-5 d-none d-lg-block">
        <div class="row">
            <div class="col-md-6 text-center text-lg-left mb-2 mb-lg-0">
                <div class="d-inline-flex align-items-center">
                    <a class="text-body pr-3" href=""><i class="fa fa-phone-alt mr-2"></i>+012 345 6789</a>
                    <span class="text-body">|</span>
                    <a class="text-body px-3" href=""><i class="fa fa-envelope mr-2"></i>info@example.com</a>
                </div>
            </div>
            <div class="col-md-6 text-center text-lg-right">
                <div class="d-inline-flex align-items-center">
                    <a class="text-body px-3" href="">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a class="text-body px-3" href="">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a class="text-body px-3" href="">
                        <i class="fab fa-linkedin-in"></i>
                    </a>
                    <a class="text-body px-3" href="">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a class="text-body pl-3" href="">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>
    <!-- Topbar End -->


    <!-- Navbar Start -->
    <div class="container-fluid position-relative nav-bar p-0">
        <div class="position-relative px-lg-5" style="z-index: 9;">
            <nav class="navbar navbar-expand-lg bg-secondary navbar-dark py-3 py-lg-0 pl-3 pl-lg-5">
                <a href="" class="navbar-brand">
                    <h1 class="text-uppercase text-primary mb-1">SWIFT RIDE</h1>
                </a>
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-center px-3" id="navbarCollapse">
    <div class="navbar-nav py-0">
        <a href="index.html" class="nav-item nav-link active">Home</a>
        <a href="about.html" class="nav-item nav-link">About</a>
        <a href="service.html" class="nav-item nav-link">Service</a>
        <div class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Cars</a>
            <div class="dropdown-menu rounded-0 m-0">
                <a href="car.html" class="dropdown-item">Car Listing</a>
                <a href="detail.html" class="dropdown-item">Car Detail</a>
                <a href="booking.html" class="dropdown-item">Car Booking</a>
            </div>
        </div>
        <div class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Pages</a>
            <div class="dropdown-menu rounded-0 m-0">
                <a href="team.html" class="dropdown-item">The Team</a>
                <a href="testimonial.html" class="dropdown-item">Testimonial</a>
            </div>
        </div>
        <a href="contact.html" class="nav-item nav-link">Contact</a>
    </div>
</div>
<div>
<div class="nav-item dropdown pe-3">
    <a class="nav-link nav-profile d-flex align-items-center pe-0" href="#" data-bs-toggle="dropdown">
        <img src="assets/images/funny.jpg" alt="Profile" class="rounded-circle" style="max-width: 50px; margin-right: 10px;">
        {% if app.user !=null %}
            <span class="d-none d-md-block dropdown-toggle">{{ app.user.name }}</span>
        {% endif %}
    </a><!-- End Profile Image Icon -->
    
    <!-- Dropdown Menu -->
    <ul class="dropdown-menu dropdown-menu-end dropdown-menu-arrow profile">
        <!-- Dropdown Header -->
        <li class="dropdown-header">
            <h6>{{ app.user.username }}</h6>
            <span>Utilisateur de SWIFTRIDE</span>
        </li>
        <li><hr class="dropdown-divider"></li>
        <!-- Dropdown Items -->
        <li><a class="dropdown-item d-flex align-items-center" href="users-profile.html"><i class="bi bi-person"></i> <span>My Profile</span></a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item d-flex align-items-center" href="users-profile.html"><i class="bi bi-gear"></i> <span>Account Settings</span></a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item d-flex align-items-center" href="pages-faq.html"><i class="bi bi-question-circle"></i> <span>FAQ</span></a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item d-flex align-items-center" href="{{ path('app_logout') }}"><i class="bi bi-box-arrow-left"></i> <span>Log Out</span></a></li>
    </ul>
</div>

            </nav>
        </div>
    </div>
    <!-- Navbar End -->



<!-- accordion style 3 start -->
<div class="col-lg-12 mt-5">
    <div class="card">
        <div class="card-body">
            <h3 class="header-title">Avis</h5>
            <div id="accordion3" class="according accordion-s3">
                <!-- Striped table start -->
                <div class="single-table">
                    <div class="table-responsive">
                        <table class="table table-striped text-center">
                            <thead class="text-uppercase">
                                <tr>
                                    <th scope="col">Note</th>
                                    <th scope="col">Avis</th>
                                    <th scope="col">Commentaire</th>
 
                                    <th scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for Avis in a %}
                                    <tr>
                                        <td><div class="d-flex items-center mb-3">
                         {% if Avis.etoile != 0 %}
                         {% for i in range(1, Avis.etoile|round(0, 'floor') ) %}
                             <svg aria-hidden="true" class="w-5 h-5 text-warning" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Fourth star</title><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                         {% endfor %}
                         {% set x = 5 - Avis.etoile %}
                             {% if x > 0 %}
                                 {%  for i in range(1,x|round(0, 'floor')  )%}
                                     <svg aria-hidden="true" class="w-5 h-5 text-gray-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Fifth star</title><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                 {% endfor %}
                             {% endif %}
                        
                         {% endif %}
                     </div></td>
                                        <td>{{ Avis.getCommentaire }}</td>
                                        <td>
  <div id="comment-{{ Avis.id }}">
{% for comment in Avis.commentaires %}
    <div id="comment-{{ comment.id }}">
        {{ comment.commentaire }}<br>
        <a href="{{ path('supprimer_commentaire', {'id': comment.id}) }}" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce commentaire ?')">
            <i class="fa fa-scissors" style="color: orange;"></i>
        </a>
    </div>
{% endfor %}

  </div>
</td>

                                        <td>
                                            <ul class="d-flex justify-content-center">
                                                <li class="mr-3"><a href="{{ path('modifAvis',{'id':Avis.id}) }}" class="text-primary"><i class="fa fa-edit"></i></a></li>
                                                <li>
                                                <a href="#" class="text-danger" onclick="confirmDelete('{{ path('supavis',{'id': Avis.id}) }}', '{{ Avis.getId }}')">
                                                        <i class="ti-trash"></i>
                                                    </a>
                                                </li>
                                             
                                            <li><a href="{{ path('addcommentaire',{'id':Avis.id}) }}" class="text-secondary"><i class="fa fa-comments-o" style="color: orange;"></i></a></li>
                                                </ul>

                                        </td>
                                    </tr>
                                {% endfor %}
                                <script>
                                    function confirmDelete(url, id) {
                                        if (confirm("Are you sure you want to delete Avis '" + id + "' ?")) {
                                            window.location.href = url;
                                        }
                                    }
                                </script>
                            </tbody>
                        </table>
{% if avis5etoilesLePlusLong is not null %}
<div class="row mt-4">
    <div class="col-lg-4">
        <p><strong>Nombre total d'avis:</strong> {{ totalAvis }}</p>
    </div>
    <div class="col-lg-4">
        <p><strong>Moyenne d'avis:</strong> {{ moyenneAvis }}</p>
    </div>
    <div class="col-lg-4">
        <p><strong>TOP Commentaires :</strong> {{ avis5etoilesLePlusLong.commentaire }}</p>
    </div>
</div>
{% endif %}                        </div>
                    </div>
                </div>
                <!-- Striped table end -->
            </div>
        </div>
    </div>
</div>
<!-- accordion style 3 end --> 


<div class="container d-flex justify-content-center align-items-center">
  <form action="http://127.0.0.1:8000/addavis">
    <div class="col-auto my-1">
      <button type="submit" class="btn btn-primary mt-4 pr-4 pl-4">ajouter un avis</button>
    </div>
  </form>
</div>


  <!-- Footer Start -->
<div class="container-fluid bg-dark py-4 px-sm-3 px-md-5 custom-class" style="height: 1px;">
        <p class="mb-2 text-center text-body">&copy; <a href="#">SWIFT RIDE</a>. All Rights Reserved.</p>
    </div>
    <!-- Footer End -->


    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="fa fa-angle-double-up"></i></a>


    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="lib/easing/easing.min.js"></script>
    <script src="lib/waypoints/waypoints.min.js"></script>
    <script src="lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="lib/tempusdominus/js/moment.min.js"></script>
    <script src="lib/tempusdominus/js/moment-timezone.min.js"></script>
    <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
        <!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Bootstrap JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>

    <!-- Template Javascript -->
    <script src="js/main.js"></script>
{% endblock %}
